{"ast":null,"code":"import _classCallCheck from \"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _superPropGet from \"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/esm/superPropGet.js\";\nimport _inherits from \"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nvar _Inline;\nimport \"core-js/modules/es.array.index-of.js\";\nimport { EmbedBlot, InlineBlot, Scope } from 'parchment';\nimport Break from './break.js';\nimport Text from './text.js';\nvar Inline = /*#__PURE__*/function (_InlineBlot) {\n  function Inline() {\n    _classCallCheck(this, Inline);\n    return _callSuper(this, Inline, arguments);\n  }\n  _inherits(Inline, _InlineBlot);\n  return _createClass(Inline, [{\n    key: \"formatAt\",\n    value: function formatAt(index, length, name, value) {\n      if (Inline.compare(this.statics.blotName, name) < 0 && this.scroll.query(name, Scope.BLOT)) {\n        var blot = this.isolate(index, length);\n        if (value) {\n          blot.wrap(name, value);\n        }\n      } else {\n        _superPropGet(Inline, \"formatAt\", this, 3)([index, length, name, value]);\n      }\n    }\n  }, {\n    key: \"optimize\",\n    value: function optimize(context) {\n      _superPropGet(Inline, \"optimize\", this, 3)([context]);\n      if (this.parent instanceof Inline && Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n        var parent = this.parent.isolate(this.offset(), this.length());\n        // @ts-expect-error TODO: make isolate generic\n        this.moveChildren(parent);\n        parent.wrap(this);\n      }\n    }\n  }], [{\n    key: \"compare\",\n    value: function compare(self, other) {\n      var selfIndex = Inline.order.indexOf(self);\n      var otherIndex = Inline.order.indexOf(other);\n      if (selfIndex >= 0 || otherIndex >= 0) {\n        return selfIndex - otherIndex;\n      }\n      if (self === other) {\n        return 0;\n      }\n      if (self < other) {\n        return -1;\n      }\n      return 1;\n    }\n  }]);\n}(InlineBlot);\n_Inline = Inline;\n_defineProperty(Inline, \"allowedChildren\", [_Inline, Break, EmbedBlot, Text]);\n// Lower index means deeper in the DOM tree, since not found (-1) is for embeds\n_defineProperty(Inline, \"order\", ['cursor', 'inline',\n// Must be lower\n'link',\n// Chrome wants <a> to be lower\n'underline', 'strike', 'italic', 'bold', 'script', 'code' // Must be higher\n]);\nexport default Inline;","map":{"version":3,"names":["EmbedBlot","InlineBlot","Scope","Break","Text","Inline","_InlineBlot","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","value","formatAt","index","length","name","compare","statics","blotName","scroll","query","BLOT","blot","isolate","wrap","_superPropGet","optimize","context","parent","offset","moveChildren","self","other","selfIndex","order","indexOf","otherIndex","_Inline","_defineProperty"],"sources":["../../src/blots/inline.ts"],"sourcesContent":["import { EmbedBlot, InlineBlot, Scope } from 'parchment';\nimport type { BlotConstructor } from 'parchment';\nimport Break from './break.js';\nimport Text from './text.js';\n\nclass Inline extends InlineBlot {\n  static allowedChildren: BlotConstructor[] = [Inline, Break, EmbedBlot, Text];\n  // Lower index means deeper in the DOM tree, since not found (-1) is for embeds\n  static order = [\n    'cursor',\n    'inline', // Must be lower\n    'link', // Chrome wants <a> to be lower\n    'underline',\n    'strike',\n    'italic',\n    'bold',\n    'script',\n    'code', // Must be higher\n  ];\n\n  static compare(self: string, other: string) {\n    const selfIndex = Inline.order.indexOf(self);\n    const otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    }\n    if (self === other) {\n      return 0;\n    }\n    if (self < other) {\n      return -1;\n    }\n    return 1;\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (\n      Inline.compare(this.statics.blotName, name) < 0 &&\n      this.scroll.query(name, Scope.BLOT)\n    ) {\n      const blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    if (\n      this.parent instanceof Inline &&\n      Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0\n    ) {\n      const parent = this.parent.isolate(this.offset(), this.length());\n      // @ts-expect-error TODO: make isolate generic\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\n\nexport default Inline;\n"],"mappings":";;;;;;;;AAAA,SAASA,SAAS,EAAEC,UAAU,EAAEC,KAAK,QAAQ,WAAW;AAExD,OAAOC,KAAK,MAAM,YAAY;AAC9B,OAAOC,IAAI,MAAM,WAAW;AAAA,IAEtBC,MAAM,0BAAAC,WAAA;EAAA,SAAAD,OAAA;IAAAE,eAAA,OAAAF,MAAA;IAAA,OAAAG,UAAA,OAAAH,MAAA,EAAAI,SAAA;EAAA;EAAAC,SAAA,CAAAL,MAAA,EAAAC,WAAA;EAAA,OAAAK,YAAA,CAAAN,MAAA;IAAAO,GAAA;IAAAC,KAAA,EA8BV,SAAAC,QAAQA,CAACC,KAAa,EAAEC,MAAc,EAAEC,IAAY,EAAEJ,KAAc,EAAE;MACpE,IACER,MAAM,CAACa,OAAO,CAAC,IAAI,CAACC,OAAO,CAACC,QAAQ,EAAEH,IAAI,CAAC,GAAG,CAAC,IAC/C,IAAI,CAACI,MAAM,CAACC,KAAK,CAACL,IAAI,EAAEf,KAAK,CAACqB,IAAI,CAAC,EACnC;QACA,IAAMC,IAAI,GAAG,IAAI,CAACC,OAAO,CAACV,KAAK,EAAEC,MAAM,CAAC;QACxC,IAAIH,KAAK,EAAE;UACTW,IAAI,CAACE,IAAI,CAACT,IAAI,EAAEJ,KAAK,CAAC;QACxB;MACF,CAAC,MAAM;QACLc,aAAA,CAAAtB,MAAA,wBAAeU,KAAK,EAAEC,MAAM,EAAEC,IAAI,EAAEJ,KAAK;MAC3C;IACF;EAAA;IAAAD,GAAA;IAAAC,KAAA,EAEA,SAAAe,QAAQA,CAACC,OAA+B,EAAE;MACxCF,aAAA,CAAAtB,MAAA,wBAAewB,OAAO;MACtB,IACE,IAAI,CAACC,MAAM,YAAYzB,MAAM,IAC7BA,MAAM,CAACa,OAAO,CAAC,IAAI,CAACC,OAAO,CAACC,QAAQ,EAAE,IAAI,CAACU,MAAM,CAACX,OAAO,CAACC,QAAQ,CAAC,GAAG,CAAC,EACvE;QACA,IAAMU,MAAM,GAAG,IAAI,CAACA,MAAM,CAACL,OAAO,CAAC,IAAI,CAACM,MAAM,CAAC,CAAC,EAAE,IAAI,CAACf,MAAM,CAAC,CAAC,CAAC;QAChE;QACA,IAAI,CAACgB,YAAY,CAACF,MAAM,CAAC;QACzBA,MAAM,CAACJ,IAAI,CAAC,IAAI,CAAC;MACnB;IACF;EAAA;IAAAd,GAAA;IAAAC,KAAA,EAxCA,SAAOK,OAAOA,CAACe,IAAY,EAAEC,KAAa,EAAE;MAC1C,IAAMC,SAAS,GAAG9B,MAAM,CAAC+B,KAAK,CAACC,OAAO,CAACJ,IAAI,CAAC;MAC5C,IAAMK,UAAU,GAAGjC,MAAM,CAAC+B,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC;MAC9C,IAAIC,SAAS,IAAI,CAAC,IAAIG,UAAU,IAAI,CAAC,EAAE;QACrC,OAAOH,SAAS,GAAGG,UAAU;MAC/B;MACA,IAAIL,IAAI,KAAKC,KAAK,EAAE;QAClB,OAAO,CAAC;MACV;MACA,IAAID,IAAI,GAAGC,KAAK,EAAE;QAChB,OAAO,CAAC,CAAC;MACX;MACA,OAAO,CAAC;IACV;EAAA;AAAA,EA5BmBjC,UAAU;AAAAsC,OAAA,GAAzBlC,MAAM;AAAAmC,eAAA,CAANnC,MAAM,qBACkC,CAACA,OAAM,EAAEF,KAAK,EAAEH,SAAS,EAAEI,IAAI,CAAC;AAC5E;AAAAoC,eAAA,CAFInC,MAAM,WAGK,CACb,QAAQ,EACR,QAAQ;AAAE;AACV,MAAM;AAAE;AACR,WAAW,EACX,QAAQ,EACR,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,MAAM,CAAE;AAAA,CACT;AA6CH,eAAeA,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}