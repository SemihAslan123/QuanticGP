{"ast":null,"code":"\"use strict\";\n\nvar _typeof = require(\"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/typeof.js\")[\"default\"];\nvar _classCallCheck = require(\"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/classCallCheck.js\")[\"default\"];\nvar _createClass = require(\"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/createClass.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.slice.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.string.substr.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Op_1 = require(\"./Op\");\nvar Iterator = /*#__PURE__*/function () {\n  function Iterator(ops) {\n    _classCallCheck(this, Iterator);\n    this.ops = ops;\n    this.index = 0;\n    this.offset = 0;\n  }\n  return _createClass(Iterator, [{\n    key: \"hasNext\",\n    value: function hasNext() {\n      return this.peekLength() < Infinity;\n    }\n  }, {\n    key: \"next\",\n    value: function next(length) {\n      if (!length) {\n        length = Infinity;\n      }\n      var nextOp = this.ops[this.index];\n      if (nextOp) {\n        var offset = this.offset;\n        var opLength = Op_1[\"default\"].length(nextOp);\n        if (length >= opLength - offset) {\n          length = opLength - offset;\n          this.index += 1;\n          this.offset = 0;\n        } else {\n          this.offset += length;\n        }\n        if (typeof nextOp[\"delete\"] === 'number') {\n          return {\n            \"delete\": length\n          };\n        } else {\n          var retOp = {};\n          if (nextOp.attributes) {\n            retOp.attributes = nextOp.attributes;\n          }\n          if (typeof nextOp.retain === 'number') {\n            retOp.retain = length;\n          } else if (_typeof(nextOp.retain) === 'object' && nextOp.retain !== null) {\n            // offset should === 0, length should === 1\n            retOp.retain = nextOp.retain;\n          } else if (typeof nextOp.insert === 'string') {\n            retOp.insert = nextOp.insert.substr(offset, length);\n          } else {\n            // offset should === 0, length should === 1\n            retOp.insert = nextOp.insert;\n          }\n          return retOp;\n        }\n      } else {\n        return {\n          retain: Infinity\n        };\n      }\n    }\n  }, {\n    key: \"peek\",\n    value: function peek() {\n      return this.ops[this.index];\n    }\n  }, {\n    key: \"peekLength\",\n    value: function peekLength() {\n      if (this.ops[this.index]) {\n        // Should never return 0 if our index is being managed correctly\n        return Op_1[\"default\"].length(this.ops[this.index]) - this.offset;\n      } else {\n        return Infinity;\n      }\n    }\n  }, {\n    key: \"peekType\",\n    value: function peekType() {\n      var op = this.ops[this.index];\n      if (op) {\n        if (typeof op[\"delete\"] === 'number') {\n          return 'delete';\n        } else if (typeof op.retain === 'number' || _typeof(op.retain) === 'object' && op.retain !== null) {\n          return 'retain';\n        } else {\n          return 'insert';\n        }\n      }\n      return 'retain';\n    }\n  }, {\n    key: \"rest\",\n    value: function rest() {\n      if (!this.hasNext()) {\n        return [];\n      } else if (this.offset === 0) {\n        return this.ops.slice(this.index);\n      } else {\n        var offset = this.offset;\n        var index = this.index;\n        var next = this.next();\n        var _rest = this.ops.slice(this.index);\n        this.offset = offset;\n        this.index = index;\n        return [next].concat(_rest);\n      }\n    }\n  }]);\n}();\nexports[\"default\"] = Iterator;","map":{"version":3,"names":["Op_1","require","Iterator","ops","_classCallCheck","index","offset","_createClass","key","value","hasNext","peekLength","Infinity","next","length","nextOp","opLength","retOp","attributes","retain","_typeof","insert","substr","peek","peekType","op","rest","slice","concat","exports"],"sources":["../src/OpIterator.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;AAAA,IAAAA,IAAA,GAAAC,OAAA;AAAsB,IAEDC,QAAQ;EAK3B,SAAAA,SAAYC,GAAS;IAAAC,eAAA,OAAAF,QAAA;IACnB,IAAI,CAACC,GAAG,GAAGA,GAAG;IACd,IAAI,CAACE,KAAK,GAAG,CAAC;IACd,IAAI,CAACC,MAAM,GAAG,CAAC;EACjB;EAAC,OAAAC,YAAA,CAAAL,QAAA;IAAAM,GAAA;IAAAC,KAAA,EAED,SAAAC,OAAOA,CAAA;MACL,OAAO,IAAI,CAACC,UAAU,EAAE,GAAGC,QAAQ;IACrC;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAAI,IAAIA,CAACC,MAAe;MAClB,IAAI,CAACA,MAAM,EAAE;QACXA,MAAM,GAAGF,QAAQ;;MAEnB,IAAMG,MAAM,GAAG,IAAI,CAACZ,GAAG,CAAC,IAAI,CAACE,KAAK,CAAC;MACnC,IAAIU,MAAM,EAAE;QACV,IAAMT,MAAM,GAAG,IAAI,CAACA,MAAM;QAC1B,IAAMU,QAAQ,GAAGhB,IAAA,WAAE,CAACc,MAAM,CAACC,MAAM,CAAC;QAClC,IAAID,MAAM,IAAIE,QAAQ,GAAGV,MAAM,EAAE;UAC/BQ,MAAM,GAAGE,QAAQ,GAAGV,MAAM;UAC1B,IAAI,CAACD,KAAK,IAAI,CAAC;UACf,IAAI,CAACC,MAAM,GAAG,CAAC;SAChB,MAAM;UACL,IAAI,CAACA,MAAM,IAAIQ,MAAM;;QAEvB,IAAI,OAAOC,MAAM,UAAO,KAAK,QAAQ,EAAE;UACrC,OAAO;YAAE,UAAQD;UAAM,CAAE;SAC1B,MAAM;UACL,IAAMG,KAAK,GAAO,EAAE;UACpB,IAAIF,MAAM,CAACG,UAAU,EAAE;YACrBD,KAAK,CAACC,UAAU,GAAGH,MAAM,CAACG,UAAU;;UAEtC,IAAI,OAAOH,MAAM,CAACI,MAAM,KAAK,QAAQ,EAAE;YACrCF,KAAK,CAACE,MAAM,GAAGL,MAAM;WACtB,MAAM,IACLM,OAAA,CAAOL,MAAM,CAACI,MAAM,MAAK,QAAQ,IACjCJ,MAAM,CAACI,MAAM,KAAK,IAAI,EACtB;YACA;YACAF,KAAK,CAACE,MAAM,GAAGJ,MAAM,CAACI,MAAM;WAC7B,MAAM,IAAI,OAAOJ,MAAM,CAACM,MAAM,KAAK,QAAQ,EAAE;YAC5CJ,KAAK,CAACI,MAAM,GAAGN,MAAM,CAACM,MAAM,CAACC,MAAM,CAAChB,MAAM,EAAEQ,MAAM,CAAC;WACpD,MAAM;YACL;YACAG,KAAK,CAACI,MAAM,GAAGN,MAAM,CAACM,MAAM;;UAE9B,OAAOJ,KAAK;;OAEf,MAAM;QACL,OAAO;UAAEE,MAAM,EAAEP;QAAQ,CAAE;;IAE/B;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAAc,IAAIA,CAAA;MACF,OAAO,IAAI,CAACpB,GAAG,CAAC,IAAI,CAACE,KAAK,CAAC;IAC7B;EAAC;IAAAG,GAAA;IAAAC,KAAA,EAED,SAAAE,UAAUA,CAAA;MACR,IAAI,IAAI,CAACR,GAAG,CAAC,IAAI,CAACE,KAAK,CAAC,EAAE;QACxB;QACA,OAAOL,IAAA,WAAE,CAACc,MAAM,CAAC,IAAI,CAACX,GAAG,CAAC,IAAI,CAACE,KAAK,CAAC,CAAC,GAAG,IAAI,CAACC,MAAM;OACrD,MAAM;QACL,OAAOM,QAAQ;;IAEnB;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAAe,QAAQA,CAAA;MACN,IAAMC,EAAE,GAAG,IAAI,CAACtB,GAAG,CAAC,IAAI,CAACE,KAAK,CAAC;MAC/B,IAAIoB,EAAE,EAAE;QACN,IAAI,OAAOA,EAAE,UAAO,KAAK,QAAQ,EAAE;UACjC,OAAO,QAAQ;SAChB,MAAM,IACL,OAAOA,EAAE,CAACN,MAAM,KAAK,QAAQ,IAC5BC,OAAA,CAAOK,EAAE,CAACN,MAAM,MAAK,QAAQ,IAAIM,EAAE,CAACN,MAAM,KAAK,IAAK,EACrD;UACA,OAAO,QAAQ;SAChB,MAAM;UACL,OAAO,QAAQ;;;MAGnB,OAAO,QAAQ;IACjB;EAAC;IAAAX,GAAA;IAAAC,KAAA,EAED,SAAAiB,IAAIA,CAAA;MACF,IAAI,CAAC,IAAI,CAAChB,OAAO,EAAE,EAAE;QACnB,OAAO,EAAE;OACV,MAAM,IAAI,IAAI,CAACJ,MAAM,KAAK,CAAC,EAAE;QAC5B,OAAO,IAAI,CAACH,GAAG,CAACwB,KAAK,CAAC,IAAI,CAACtB,KAAK,CAAC;OAClC,MAAM;QACL,IAAMC,MAAM,GAAG,IAAI,CAACA,MAAM;QAC1B,IAAMD,KAAK,GAAG,IAAI,CAACA,KAAK;QACxB,IAAMQ,IAAI,GAAG,IAAI,CAACA,IAAI,EAAE;QACxB,IAAMa,KAAI,GAAG,IAAI,CAACvB,GAAG,CAACwB,KAAK,CAAC,IAAI,CAACtB,KAAK,CAAC;QACvC,IAAI,CAACC,MAAM,GAAGA,MAAM;QACpB,IAAI,CAACD,KAAK,GAAGA,KAAK;QAClB,OAAO,CAACQ,IAAI,CAAC,CAACe,MAAM,CAACF,KAAI,CAAC;;IAE9B;EAAC;AAAA;AAtGHG,OAAA,cAAA3B,QAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}