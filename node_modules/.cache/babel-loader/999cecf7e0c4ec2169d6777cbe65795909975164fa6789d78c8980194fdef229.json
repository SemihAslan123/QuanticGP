{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/defineProperty.js\")[\"default\"];\nvar _slicedToArray = require(\"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/slicedToArray.js\")[\"default\"];\nvar _classCallCheck = require(\"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/classCallCheck.js\")[\"default\"];\nvar _createClass = require(\"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/createClass.js\")[\"default\"];\nvar _typeof = require(\"/home/esteban/2emeAnnee/S3/devWeb/QuanticGP10/node_modules/@babel/runtime/helpers/typeof.js\")[\"default\"];\nrequire(\"core-js/modules/es.error.cause.js\");\nrequire(\"core-js/modules/es.error.to-string.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.is-array.js\");\nrequire(\"core-js/modules/es.array.join.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.reduce.js\");\nrequire(\"core-js/modules/es.array.slice.js\");\nrequire(\"core-js/modules/es.array.splice.js\");\nrequire(\"core-js/modules/es.array.unshift.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/esnext.iterator.constructor.js\");\nrequire(\"core-js/modules/esnext.iterator.filter.js\");\nrequire(\"core-js/modules/esnext.iterator.for-each.js\");\nrequire(\"core-js/modules/esnext.iterator.map.js\");\nrequire(\"core-js/modules/esnext.iterator.reduce.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AttributeMap = exports.OpIterator = exports.Op = void 0;\nvar _diff = require(\"fast-diff\");\nvar cloneDeep = require(\"lodash.clonedeep\");\nvar isEqual = require(\"lodash.isequal\");\nvar AttributeMap_1 = require(\"./AttributeMap\");\nexports.AttributeMap = AttributeMap_1[\"default\"];\nvar Op_1 = require(\"./Op\");\nexports.Op = Op_1[\"default\"];\nvar OpIterator_1 = require(\"./OpIterator\");\nexports.OpIterator = OpIterator_1[\"default\"];\nvar NULL_CHARACTER = String.fromCharCode(0); // Placeholder char for embed in diff()\nvar getEmbedTypeAndData = function getEmbedTypeAndData(a, b) {\n  if (_typeof(a) !== 'object' || a === null) {\n    throw new Error(\"cannot retain a \".concat(_typeof(a)));\n  }\n  if (_typeof(b) !== 'object' || b === null) {\n    throw new Error(\"cannot retain a \".concat(_typeof(b)));\n  }\n  var embedType = Object.keys(a)[0];\n  if (!embedType || embedType !== Object.keys(b)[0]) {\n    throw new Error(\"embed types not matched: \".concat(embedType, \" != \").concat(Object.keys(b)[0]));\n  }\n  return [embedType, a[embedType], b[embedType]];\n};\nvar Delta = /*#__PURE__*/function () {\n  function Delta(ops) {\n    _classCallCheck(this, Delta);\n    // Assume we are given a well formed ops\n    if (Array.isArray(ops)) {\n      this.ops = ops;\n    } else if (ops != null && Array.isArray(ops.ops)) {\n      this.ops = ops.ops;\n    } else {\n      this.ops = [];\n    }\n  }\n  return _createClass(Delta, [{\n    key: \"insert\",\n    value: function insert(arg, attributes) {\n      var newOp = {};\n      if (typeof arg === 'string' && arg.length === 0) {\n        return this;\n      }\n      newOp.insert = arg;\n      if (attributes != null && _typeof(attributes) === 'object' && Object.keys(attributes).length > 0) {\n        newOp.attributes = attributes;\n      }\n      return this.push(newOp);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(length) {\n      if (length <= 0) {\n        return this;\n      }\n      return this.push({\n        \"delete\": length\n      });\n    }\n  }, {\n    key: \"retain\",\n    value: function retain(length, attributes) {\n      if (typeof length === 'number' && length <= 0) {\n        return this;\n      }\n      var newOp = {\n        retain: length\n      };\n      if (attributes != null && _typeof(attributes) === 'object' && Object.keys(attributes).length > 0) {\n        newOp.attributes = attributes;\n      }\n      return this.push(newOp);\n    }\n  }, {\n    key: \"push\",\n    value: function push(newOp) {\n      var index = this.ops.length;\n      var lastOp = this.ops[index - 1];\n      newOp = cloneDeep(newOp);\n      if (_typeof(lastOp) === 'object') {\n        if (typeof newOp[\"delete\"] === 'number' && typeof lastOp[\"delete\"] === 'number') {\n          this.ops[index - 1] = {\n            \"delete\": lastOp[\"delete\"] + newOp[\"delete\"]\n          };\n          return this;\n        }\n        // Since it does not matter if we insert before or after deleting at the same index,\n        // always prefer to insert first\n        if (typeof lastOp[\"delete\"] === 'number' && newOp.insert != null) {\n          index -= 1;\n          lastOp = this.ops[index - 1];\n          if (_typeof(lastOp) !== 'object') {\n            this.ops.unshift(newOp);\n            return this;\n          }\n        }\n        if (isEqual(newOp.attributes, lastOp.attributes)) {\n          if (typeof newOp.insert === 'string' && typeof lastOp.insert === 'string') {\n            this.ops[index - 1] = {\n              insert: lastOp.insert + newOp.insert\n            };\n            if (_typeof(newOp.attributes) === 'object') {\n              this.ops[index - 1].attributes = newOp.attributes;\n            }\n            return this;\n          } else if (typeof newOp.retain === 'number' && typeof lastOp.retain === 'number') {\n            this.ops[index - 1] = {\n              retain: lastOp.retain + newOp.retain\n            };\n            if (_typeof(newOp.attributes) === 'object') {\n              this.ops[index - 1].attributes = newOp.attributes;\n            }\n            return this;\n          }\n        }\n      }\n      if (index === this.ops.length) {\n        this.ops.push(newOp);\n      } else {\n        this.ops.splice(index, 0, newOp);\n      }\n      return this;\n    }\n  }, {\n    key: \"chop\",\n    value: function chop() {\n      var lastOp = this.ops[this.ops.length - 1];\n      if (lastOp && typeof lastOp.retain === 'number' && !lastOp.attributes) {\n        this.ops.pop();\n      }\n      return this;\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(predicate) {\n      return this.ops.filter(predicate);\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(predicate) {\n      this.ops.forEach(predicate);\n    }\n  }, {\n    key: \"map\",\n    value: function map(predicate) {\n      return this.ops.map(predicate);\n    }\n  }, {\n    key: \"partition\",\n    value: function partition(predicate) {\n      var passed = [];\n      var failed = [];\n      this.forEach(function (op) {\n        var target = predicate(op) ? passed : failed;\n        target.push(op);\n      });\n      return [passed, failed];\n    }\n  }, {\n    key: \"reduce\",\n    value: function reduce(predicate, initialValue) {\n      return this.ops.reduce(predicate, initialValue);\n    }\n  }, {\n    key: \"changeLength\",\n    value: function changeLength() {\n      return this.reduce(function (length, elem) {\n        if (elem.insert) {\n          return length + Op_1[\"default\"].length(elem);\n        } else if (elem[\"delete\"]) {\n          return length - elem[\"delete\"];\n        }\n        return length;\n      }, 0);\n    }\n  }, {\n    key: \"length\",\n    value: function length() {\n      return this.reduce(function (length, elem) {\n        return length + Op_1[\"default\"].length(elem);\n      }, 0);\n    }\n  }, {\n    key: \"slice\",\n    value: function slice() {\n      var start = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var end = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Infinity;\n      var ops = [];\n      var iter = new OpIterator_1[\"default\"](this.ops);\n      var index = 0;\n      while (index < end && iter.hasNext()) {\n        var nextOp = void 0;\n        if (index < start) {\n          nextOp = iter.next(start - index);\n        } else {\n          nextOp = iter.next(end - index);\n          ops.push(nextOp);\n        }\n        index += Op_1[\"default\"].length(nextOp);\n      }\n      return new Delta(ops);\n    }\n  }, {\n    key: \"compose\",\n    value: function compose(other) {\n      var thisIter = new OpIterator_1[\"default\"](this.ops);\n      var otherIter = new OpIterator_1[\"default\"](other.ops);\n      var ops = [];\n      var firstOther = otherIter.peek();\n      if (firstOther != null && typeof firstOther.retain === 'number' && firstOther.attributes == null) {\n        var firstLeft = firstOther.retain;\n        while (thisIter.peekType() === 'insert' && thisIter.peekLength() <= firstLeft) {\n          firstLeft -= thisIter.peekLength();\n          ops.push(thisIter.next());\n        }\n        if (firstOther.retain - firstLeft > 0) {\n          otherIter.next(firstOther.retain - firstLeft);\n        }\n      }\n      var delta = new Delta(ops);\n      while (thisIter.hasNext() || otherIter.hasNext()) {\n        if (otherIter.peekType() === 'insert') {\n          delta.push(otherIter.next());\n        } else if (thisIter.peekType() === 'delete') {\n          delta.push(thisIter.next());\n        } else {\n          var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n          var thisOp = thisIter.next(length);\n          var otherOp = otherIter.next(length);\n          if (otherOp.retain) {\n            var newOp = {};\n            if (typeof thisOp.retain === 'number') {\n              newOp.retain = typeof otherOp.retain === 'number' ? length : otherOp.retain;\n            } else {\n              if (typeof otherOp.retain === 'number') {\n                if (thisOp.retain == null) {\n                  newOp.insert = thisOp.insert;\n                } else {\n                  newOp.retain = thisOp.retain;\n                }\n              } else {\n                var action = thisOp.retain == null ? 'insert' : 'retain';\n                var _getEmbedTypeAndData = getEmbedTypeAndData(thisOp[action], otherOp.retain),\n                  _getEmbedTypeAndData2 = _slicedToArray(_getEmbedTypeAndData, 3),\n                  embedType = _getEmbedTypeAndData2[0],\n                  thisData = _getEmbedTypeAndData2[1],\n                  otherData = _getEmbedTypeAndData2[2];\n                var handler = Delta.getHandler(embedType);\n                newOp[action] = _defineProperty({}, embedType, handler.compose(thisData, otherData, action === 'retain'));\n              }\n            }\n            // Preserve null when composing with a retain, otherwise remove it for inserts\n            var attributes = AttributeMap_1[\"default\"].compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n            if (attributes) {\n              newOp.attributes = attributes;\n            }\n            delta.push(newOp);\n            // Optimization if rest of other is just retain\n            if (!otherIter.hasNext() && isEqual(delta.ops[delta.ops.length - 1], newOp)) {\n              var rest = new Delta(thisIter.rest());\n              return delta.concat(rest).chop();\n            }\n            // Other op should be delete, we could be an insert or retain\n            // Insert + delete cancels out\n          } else if (typeof otherOp[\"delete\"] === 'number' && (typeof thisOp.retain === 'number' || _typeof(thisOp.retain) === 'object' && thisOp.retain !== null)) {\n            delta.push(otherOp);\n          }\n        }\n      }\n      return delta.chop();\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(other) {\n      var delta = new Delta(this.ops.slice());\n      if (other.ops.length > 0) {\n        delta.push(other.ops[0]);\n        delta.ops = delta.ops.concat(other.ops.slice(1));\n      }\n      return delta;\n    }\n  }, {\n    key: \"diff\",\n    value: function diff(other, cursor) {\n      if (this.ops === other.ops) {\n        return new Delta();\n      }\n      var strings = [this, other].map(function (delta) {\n        return delta.map(function (op) {\n          if (op.insert != null) {\n            return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n          }\n          var prep = delta === other ? 'on' : 'with';\n          throw new Error('diff() called ' + prep + ' non-document');\n        }).join('');\n      });\n      var retDelta = new Delta();\n      var diffResult = _diff(strings[0], strings[1], cursor, true);\n      var thisIter = new OpIterator_1[\"default\"](this.ops);\n      var otherIter = new OpIterator_1[\"default\"](other.ops);\n      diffResult.forEach(function (component) {\n        var length = component[1].length;\n        while (length > 0) {\n          var opLength = 0;\n          switch (component[0]) {\n            case _diff.INSERT:\n              opLength = Math.min(otherIter.peekLength(), length);\n              retDelta.push(otherIter.next(opLength));\n              break;\n            case _diff.DELETE:\n              opLength = Math.min(length, thisIter.peekLength());\n              thisIter.next(opLength);\n              retDelta[\"delete\"](opLength);\n              break;\n            case _diff.EQUAL:\n              opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n              var thisOp = thisIter.next(opLength);\n              var otherOp = otherIter.next(opLength);\n              if (isEqual(thisOp.insert, otherOp.insert)) {\n                retDelta.retain(opLength, AttributeMap_1[\"default\"].diff(thisOp.attributes, otherOp.attributes));\n              } else {\n                retDelta.push(otherOp)[\"delete\"](opLength);\n              }\n              break;\n          }\n          length -= opLength;\n        }\n      });\n      return retDelta.chop();\n    }\n  }, {\n    key: \"eachLine\",\n    value: function eachLine(predicate) {\n      var newline = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '\\n';\n      var iter = new OpIterator_1[\"default\"](this.ops);\n      var line = new Delta();\n      var i = 0;\n      while (iter.hasNext()) {\n        if (iter.peekType() !== 'insert') {\n          return;\n        }\n        var thisOp = iter.peek();\n        var start = Op_1[\"default\"].length(thisOp) - iter.peekLength();\n        var index = typeof thisOp.insert === 'string' ? thisOp.insert.indexOf(newline, start) - start : -1;\n        if (index < 0) {\n          line.push(iter.next());\n        } else if (index > 0) {\n          line.push(iter.next(index));\n        } else {\n          if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n            return;\n          }\n          i += 1;\n          line = new Delta();\n        }\n      }\n      if (line.length() > 0) {\n        predicate(line, {}, i);\n      }\n    }\n  }, {\n    key: \"invert\",\n    value: function invert(base) {\n      var inverted = new Delta();\n      this.reduce(function (baseIndex, op) {\n        if (op.insert) {\n          inverted[\"delete\"](Op_1[\"default\"].length(op));\n        } else if (typeof op.retain === 'number' && op.attributes == null) {\n          inverted.retain(op.retain);\n          return baseIndex + op.retain;\n        } else if (op[\"delete\"] || typeof op.retain === 'number') {\n          var length = op[\"delete\"] || op.retain;\n          var slice = base.slice(baseIndex, baseIndex + length);\n          slice.forEach(function (baseOp) {\n            if (op[\"delete\"]) {\n              inverted.push(baseOp);\n            } else if (op.retain && op.attributes) {\n              inverted.retain(Op_1[\"default\"].length(baseOp), AttributeMap_1[\"default\"].invert(op.attributes, baseOp.attributes));\n            }\n          });\n          return baseIndex + length;\n        } else if (_typeof(op.retain) === 'object' && op.retain !== null) {\n          var _slice = base.slice(baseIndex, baseIndex + 1);\n          var baseOp = new OpIterator_1[\"default\"](_slice.ops).next();\n          var _getEmbedTypeAndData3 = getEmbedTypeAndData(op.retain, baseOp.insert),\n            _getEmbedTypeAndData4 = _slicedToArray(_getEmbedTypeAndData3, 3),\n            embedType = _getEmbedTypeAndData4[0],\n            opData = _getEmbedTypeAndData4[1],\n            baseOpData = _getEmbedTypeAndData4[2];\n          var handler = Delta.getHandler(embedType);\n          inverted.retain(_defineProperty({}, embedType, handler.invert(opData, baseOpData)), AttributeMap_1[\"default\"].invert(op.attributes, baseOp.attributes));\n          return baseIndex + 1;\n        }\n        return baseIndex;\n      }, 0);\n      return inverted.chop();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(arg) {\n      var priority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      priority = !!priority;\n      if (typeof arg === 'number') {\n        return this.transformPosition(arg, priority);\n      }\n      var other = arg;\n      var thisIter = new OpIterator_1[\"default\"](this.ops);\n      var otherIter = new OpIterator_1[\"default\"](other.ops);\n      var delta = new Delta();\n      while (thisIter.hasNext() || otherIter.hasNext()) {\n        if (thisIter.peekType() === 'insert' && (priority || otherIter.peekType() !== 'insert')) {\n          delta.retain(Op_1[\"default\"].length(thisIter.next()));\n        } else if (otherIter.peekType() === 'insert') {\n          delta.push(otherIter.next());\n        } else {\n          var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n          var thisOp = thisIter.next(length);\n          var otherOp = otherIter.next(length);\n          if (thisOp[\"delete\"]) {\n            // Our delete either makes their delete redundant or removes their retain\n            continue;\n          } else if (otherOp[\"delete\"]) {\n            delta.push(otherOp);\n          } else {\n            var thisData = thisOp.retain;\n            var otherData = otherOp.retain;\n            var transformedData = _typeof(otherData) === 'object' && otherData !== null ? otherData : length;\n            if (_typeof(thisData) === 'object' && thisData !== null && _typeof(otherData) === 'object' && otherData !== null) {\n              var embedType = Object.keys(thisData)[0];\n              if (embedType === Object.keys(otherData)[0]) {\n                var handler = Delta.getHandler(embedType);\n                if (handler) {\n                  transformedData = _defineProperty({}, embedType, handler.transform(thisData[embedType], otherData[embedType], priority));\n                }\n              }\n            }\n            // We retain either their retain or insert\n            delta.retain(transformedData, AttributeMap_1[\"default\"].transform(thisOp.attributes, otherOp.attributes, priority));\n          }\n        }\n      }\n      return delta.chop();\n    }\n  }, {\n    key: \"transformPosition\",\n    value: function transformPosition(index) {\n      var priority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      priority = !!priority;\n      var thisIter = new OpIterator_1[\"default\"](this.ops);\n      var offset = 0;\n      while (thisIter.hasNext() && offset <= index) {\n        var length = thisIter.peekLength();\n        var nextType = thisIter.peekType();\n        thisIter.next();\n        if (nextType === 'delete') {\n          index -= Math.min(length, index - offset);\n          continue;\n        } else if (nextType === 'insert' && (offset < index || !priority)) {\n          index += length;\n        }\n        offset += length;\n      }\n      return index;\n    }\n  }], [{\n    key: \"registerEmbed\",\n    value: function registerEmbed(embedType, handler) {\n      this.handlers[embedType] = handler;\n    }\n  }, {\n    key: \"unregisterEmbed\",\n    value: function unregisterEmbed(embedType) {\n      delete this.handlers[embedType];\n    }\n  }, {\n    key: \"getHandler\",\n    value: function getHandler(embedType) {\n      var handler = this.handlers[embedType];\n      if (!handler) {\n        throw new Error(\"no handlers for embed type \\\"\".concat(embedType, \"\\\"\"));\n      }\n      return handler;\n    }\n  }]);\n}();\nDelta.Op = Op_1[\"default\"];\nDelta.OpIterator = OpIterator_1[\"default\"];\nDelta.AttributeMap = AttributeMap_1[\"default\"];\nDelta.handlers = {};\nexports[\"default\"] = Delta;\nif ((typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === 'object') {\n  module.exports = Delta;\n  module.exports[\"default\"] = Delta;\n}","map":{"version":3,"names":["diff","require","cloneDeep","isEqual","AttributeMap_1","exports","AttributeMap","Op_1","Op","OpIterator_1","OpIterator","NULL_CHARACTER","String","fromCharCode","getEmbedTypeAndData","a","b","_typeof","Error","concat","embedType","Object","keys","Delta","ops","_classCallCheck","Array","isArray","_createClass","key","value","insert","arg","attributes","newOp","length","push","delete","retain","index","lastOp","unshift","splice","chop","pop","filter","predicate","forEach","map","partition","passed","failed","op","target","reduce","initialValue","changeLength","elem","slice","start","arguments","undefined","end","Infinity","iter","hasNext","nextOp","next","compose","other","thisIter","otherIter","firstOther","peek","firstLeft","peekType","peekLength","delta","Math","min","thisOp","otherOp","action","_getEmbedTypeAndData","_getEmbedTypeAndData2","_slicedToArray","thisData","otherData","handler","getHandler","_defineProperty","rest","cursor","strings","prep","join","retDelta","diffResult","component","opLength","INSERT","DELETE","EQUAL","eachLine","newline","line","i","indexOf","invert","base","inverted","baseIndex","baseOp","_getEmbedTypeAndData3","_getEmbedTypeAndData4","opData","baseOpData","transform","priority","transformPosition","transformedData","offset","nextType","registerEmbed","handlers","unregisterEmbed","module"],"sources":["../src/Delta.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}